import sys

def analyze_logs(filename):
    print(f"--- ROZPOCZYNAM ANALIZÄ˜ PLIKU: {filename} ---")
    
    try:
        # Otwieramy plik do odczytu ('r' = read)
        with open(filename, 'r') as file:
            lines = file.readlines()
            
        error_count = 0
        critical_count = 0
        
        print("\n[!!!] ZNALEZIONE ZAGROÅ»ENIA:")
        
        # PÄ™tla sprawdzajÄ…ca kaÅ¼dÄ… liniÄ™ po kolei
        for line in lines:
            line = line.strip() # CzyÅ›cimy puste znaki
            
            # Szukamy sÅ‚Ã³w kluczowych
            if "CRITICAL" in line:
                print(f"ğŸ”´ KRYTYCZNE: {line}")
                critical_count += 1
            elif "ERROR" in line:
                print(f"ğŸŸ  BÅÄ„D: {line}")
                error_count += 1
            elif "SQL Injection" in line:
                print(f"â˜ ï¸ ATAK HAKERSKI: {line}")
        
        print("-" * 40)
        print(f"Raport:")
        print(f"Znaleziono {error_count} bÅ‚Ä™dÃ³w")
        print(f"Znaleziono {critical_count} zdarzeÅ„ krytycznych")
        print("-" * 40)
        
    except FileNotFoundError:
        print("BÅÄ„D: Nie znaleziono pliku z logami!")

if __name__ == "__main__":
    # DomyÅ›lnie szukamy w pliku server.log
    analyze_logs("server.log")